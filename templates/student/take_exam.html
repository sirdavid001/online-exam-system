{% extends 'student/studentbase.html' %}

{% block content %}
<section class="page-head reveal">
  <h2>Exam Details</h2>
  <p class="page-lead">Review course rules and constraints before beginning your attempt.</p>
</section>

<div class="stack-card reveal">
  <article class="form-card">
    <h3>{{ course.course_name }}</h3>

    <ul class="summary-list">
      <li>Total Questions: {{ total_questions }}</li>
      <li>Total Marks: {{ total_marks }}</li>
      <li>Duration: {{ course.duration_minutes }} minutes</li>
      <li>Pass Mark: {{ course.pass_mark }}%</li>
      <li>Max Attempts: {{ course.max_attempts }}</li>
      <li>Attempts Used: {{ attempts_taken }}</li>
      <li>Attempts Remaining: {{ remaining_attempts }}</li>
      <li>Negative Mark Per Wrong Answer: {{ course.negative_mark_per_wrong }}</li>
      <li>Question Order: {% if course.shuffle_questions %}Shuffled{% else %}Fixed{% endif %}</li>
    </ul>

    {% if course.instructions %}
    <h4>Course Instructions</h4>
    <p>{{ course.instructions|linebreaksbr }}</p>
    {% endif %}

    <h4>General Rules</h4>
    <ul class="rules-list">
      <li>All questions are multiple-choice and only one option is correct.</li>
      <li>Answer within the configured duration; timer starts when exam begins.</li>
      <li>Avoid refreshing or leaving the page during an active attempt.</li>
      <li>You can review detailed result analytics after submission.</li>
    </ul>

    {% if remaining_attempts > 0 %}
    <a href="{% url 'start-exam' course.id %}" class="btn btn-primary btn-lg">
      <i class="fas fa-play"></i> Start Exam
    </a>
    {% else %}
    <button class="btn btn-secondary btn-lg" type="button" disabled>
      <i class="fas fa-lock"></i> Attempt Limit Reached
    </button>
    {% endif %}
  </article>
</div>
{% endblock content %}
