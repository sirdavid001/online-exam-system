{% extends 'exam/base_public.html' %}
{% load widget_tweaks %}

{% block title %}Student Signup{% endblock %}

{% block content %}
<section class="auth-shell auth-shell-wide">
  <article class="form-card">
    <h1>Create Student Account</h1>
    <p>Use official university records. Matric/reg number and institutional email are required.</p>

    {% if userForm.errors or studentForm.errors %}
    <div class="alert alert-danger">
      <strong>Unable to submit:</strong> Please correct the highlighted form errors.
    </div>
    {% endif %}

    <form method="POST" autocomplete="off" enctype="multipart/form-data" class="stack-form">
      {% csrf_token %}

      <div class="form-grid">
        <div class="form-group">
          <label for="first_name">First Name</label>
          {% render_field userForm.first_name|attr:'required:true' class="form-control" placeholder="First name" %}
          {{ userForm.first_name.errors }}
        </div>
        <div class="form-group">
          <label for="last_name">Last Name</label>
          {% render_field userForm.last_name|attr:'required:true' class="form-control" placeholder="Last name" %}
          {{ userForm.last_name.errors }}
        </div>

        <div class="form-group">
          <label for="matric_number">Matriculation / Registration Number</label>
          {% render_field studentForm.matric_number|attr:'required:true' class="form-control" placeholder="Example: UNN/2025/12345" %}
          {{ studentForm.matric_number.errors }}
        </div>

        <div class="form-group">
          <label for="institutional_email">Institutional Student Email</label>
          {% render_field studentForm.institutional_email|attr:'required:true' class="form-control" placeholder="student@university.edu.ng" %}
          {{ studentForm.institutional_email.errors }}
        </div>

        <div class="form-group">
          <label for="faculty">Faculty / College (Dennis Osadebay University)</label>
          {% render_field studentForm.faculty|attr:'required:true' class="form-control" %}
          {{ studentForm.faculty.errors }}
        </div>

        <div class="form-group">
          <label for="department">Department (Select from DOU list)</label>
          {% render_field studentForm.department|attr:'required:true' class="form-control" %}
          {{ studentForm.department.errors }}
        </div>

        <div class="form-group">
          <label for="programme">Programme</label>
          {% render_field studentForm.programme|attr:'required:true' class="form-control" placeholder="Example: B.Eng Mechanical Engineering" %}
          {{ studentForm.programme.errors }}
        </div>

        <div class="form-group">
          <label for="current_level">Current Level</label>
          {% render_field studentForm.current_level|attr:'required:true' class="form-control" %}
          {{ studentForm.current_level.errors }}
        </div>

        <div class="form-group">
          <label for="entry_year">Entry Year</label>
          {% render_field studentForm.entry_year|attr:'required:true' class="form-control" placeholder="Example: 2023" %}
          {{ studentForm.entry_year.errors }}
        </div>

        <div class="form-group">
          <label for="mobile">Official Phone Number</label>
          {% render_field studentForm.mobile|attr:'required:true' class="form-control" placeholder="08031234567" %}
          {{ studentForm.mobile.errors }}
        </div>

        <div class="form-group span-2">
          <label for="address">Contact Address</label>
          {% render_field studentForm.address|attr:'required:true' class="form-control" placeholder="Current student address" %}
          {{ studentForm.address.errors }}
        </div>

        <div class="form-group">
          <label for="username">Portal Username</label>
          {% render_field userForm.username|attr:'required:true' class="form-control" placeholder="Username" %}
          {{ userForm.username.errors }}
        </div>
        <div class="form-group">
          <label for="inputPassword4">Password</label>
          {% render_field userForm.password|attr:'required:true' class="form-control" placeholder="Password" %}
          {{ userForm.password.errors }}
        </div>

        <div class="form-group span-2">
          <label for="profile_pic">Profile Picture</label>
          {% render_field studentForm.profile_pic class="form-control" %}
          {{ studentForm.profile_pic.errors }}
        </div>
      </div>

      <div class="form-group">
        <label for="{{ userForm.accept_policies.id_for_label }}" class="d-flex align-items-start">
          {{ userForm.accept_policies }}
          <span class="ml-2">
            I agree to the
            <a href="{% url 'terms-of-use' %}" target="_blank" rel="noopener">Terms of Use</a>
            and
            <a href="{% url 'privacy-policy' %}" target="_blank" rel="noopener">Privacy Policy</a>.
          </span>
        </label>
        {{ userForm.accept_policies.errors }}
      </div>

      <button type="submit" class="btn btn-brand btn-lg">Create Account</button>
    </form>
  </article>
</section>
{% endblock %}
