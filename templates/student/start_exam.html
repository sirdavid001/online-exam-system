{% extends 'student/studentbase.html' %}

{% block content %}
<section class="page-head reveal">
  <h2>Live Exam</h2>
  <p class="page-lead">Course: {{ course.course_name }} | Attempt {{ attempt_number }}</p>
</section>

<div class="stack-card reveal exam-toolbar">
  <div class="alert alert-info">
    <strong>Tip:</strong> You can write equation questions/answers using LaTeX syntax like <code>\(\frac{a}{b}\)</code>.
  </div>
  <div class="timer-chip" data-exam-timer data-duration="{{ duration_seconds }}">
    <i class="fas fa-clock"></i>
    <span data-exam-timer-display>{{ course.duration_minutes }}:00</span>
  </div>
</div>

<form class="exam-sheet reveal" data-exam-form autocomplete="off" action="{% url 'calculate-marks' %}" method="POST">
  {% csrf_token %}
  <input type="hidden" name="course_id" value="{{ course.id }}" />

  {% for q in questions %}
  <section class="exam-question">
    <div class="exam-question-head">
      <h3>{{ forloop.counter }}. {{ q.question|linebreaksbr }}</h3>
      <span class="mark-chip">{{ q.marks }} Marks</span>
    </div>

    <div class="option-list">
      <div class="option-item">
        <input type="radio" name="question_{{ q.id }}" id="q{{ q.id }}_option1" value="Option1" />
        <label for="q{{ q.id }}_option1">{{ q.option1|linebreaksbr }}</label>
      </div>

      <div class="option-item">
        <input type="radio" name="question_{{ q.id }}" id="q{{ q.id }}_option2" value="Option2" />
        <label for="q{{ q.id }}_option2">{{ q.option2|linebreaksbr }}</label>
      </div>

      <div class="option-item">
        <input type="radio" name="question_{{ q.id }}" id="q{{ q.id }}_option3" value="Option3" />
        <label for="q{{ q.id }}_option3">{{ q.option3|linebreaksbr }}</label>
      </div>

      <div class="option-item">
        <input type="radio" name="question_{{ q.id }}" id="q{{ q.id }}_option4" value="Option4" />
        <label for="q{{ q.id }}_option4">{{ q.option4|linebreaksbr }}</label>
      </div>
    </div>
  </section>
  {% empty %}
  <p class="text-muted">No questions are available for this course yet.</p>
  {% endfor %}

  <button class="btn btn-primary btn-lg" type="submit">
    <i class="fas fa-paper-plane"></i> Submit Answers
  </button>
</form>
{% endblock content %}
